#include "serial_audio_lib.h"

#include <stdlib.h>
#include <stdio.h>
#include "xparameters.h"
#include "xuartlite_l.h"
#include "dds_phase_accum.h"


#define MAX_AUDIO_FILE_SAMPLES 4096

static uint32_t dds_inc_word;
static uint32_t curr_freq;

#define NUM_SIN_STEPS 9
void sin_audio_test(void) {
	set_dds_accum(100);
}

static void inc_freq(uint32_t change_hz) {

}

static void dec_freq(uint32_t change_hz) {

}


void print_main_menu(void) {
	xil_printf("\r\n\tWelcome to the DDS Synthesizer!\r\n");
	xil_printf("\t===== Main Menu =====\r\n");
	xil_printf("\tu - step frequency up 100Hz\r\n");
	xil_printf("\tU - step frequency up 1000Hz\r\n");
	xil_printf("\td - step frequency down 100Hz\r\n");
	xil_printf("\tD - step frequency down 1000Hz\r\n");
	xil_printf("\r\nPress a key to continue...\r\n");
}


/*
 * Waits for entered option,
 * Sanitizes Entered option,
 * returns option
 */
void handle_choice(void) {
	char input_c =  getchar();
	switch (input_c) {
		case 'u':
			inc_freq(100); break;
		case 'U':
			inc_freq(1000); break;
		case 'd':
			dec_freq(100); break;
		case 'D':
			dec_freq(1000); break;
		default:
			xil_printf("[handle_choice] Unhandled character received: 0x%02x\r\n", input_c);
	}
}


